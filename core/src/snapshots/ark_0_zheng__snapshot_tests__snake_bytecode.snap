---
source: core/src/snapshot_tests.rs
expression: opcodes
---
[
    "Push(Integer(20))",
    "Push(String(\"w\"))",
    "Push(Integer(20))",
    "Push(String(\"h\"))",
    "Push(Integer(10))",
    "Push(Integer(10))",
    "MakeList(2)",
    "Push(Integer(10))",
    "Push(Integer(11))",
    "MakeList(2)",
    "Push(Integer(10))",
    "Push(Integer(12))",
    "MakeList(2)",
    "MakeList(3)",
    "Push(String(\"snake\"))",
    "Push(Integer(0))",
    "Push(String(\"dir\"))",
    "Push(Integer(5))",
    "Push(Integer(5))",
    "MakeList(2)",
    "Push(String(\"apple\"))",
    "Push(Integer(0))",
    "Push(String(\"game_over\"))",
    "Push(Integer(0))",
    "Push(String(\"score\"))",
    "MakeStruct(7)",
    "Store(\"state\")",
    "Push(Function(Chunk { code: [Store(\"ms\"), Load(\"sys.time.now\"), Call(0), Store(\"start\"), Load(\"sys.time.now\"), Call(0), Load(\"start\"), Sub, Load(\"ms\"), Lt, JmpIfFalse(12), Jmp(4), Push(Unit), Ret], constants: [], source_map: [SourceLocation { line: 0, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }], current_loc: SourceLocation { line: 3, col: 0 } }))",
    "Store(\"sleep_ms\")",
    "Push(Function(Chunk { code: [Store(\"snake\"), Load(\"snake\"), Load(\"sys.len\"), Call(1), Destructure, Store(\"l\"), Store(\"_\"), Load(\"l\"), Ret, Ret], constants: [], source_map: [SourceLocation { line: 0, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }], current_loc: SourceLocation { line: 3, col: 0 } }))",
    "Store(\"get_snake_len\")",
    "Push(Function(Chunk { code: [Store(\"snake\"), Load(\"snake\"), Load(\"get_snake_len\"), Call(1), Store(\"l\"), Load(\"snake\"), Load(\"l\"), Push(Integer(1)), Sub, Load(\"sys.list.get\"), Call(2), Destructure, Store(\"head\"), Store(\"_\"), Load(\"head\"), Ret, Ret], constants: [], source_map: [SourceLocation { line: 0, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }], current_loc: SourceLocation { line: 4, col: 0 } }))",
    "Store(\"get_head\")",
    "Push(Function(Chunk { code: [Load(\"state\"), GetField(\"game_over\"), JmpIfFalse(5), Push(Integer(0)), Ret, Load(\"state\"), GetField(\"snake\"), Load(\"get_head\"), Call(1), Store(\"head\"), Load(\"head\"), Push(Integer(0)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"hx\"), Store(\"_\"), Load(\"head\"), Push(Integer(1)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"hy\"), Store(\"_\"), Load(\"state\"), GetField(\"dir\"), Push(Integer(0)), Eq, JmpIfFalse(33), Load(\"hy\"), Push(Integer(1)), Sub, Store(\"hy\"), Load(\"state\"), GetField(\"dir\"), Push(Integer(1)), Eq, JmpIfFalse(42), Load(\"hy\"), Push(Integer(1)), Add, Store(\"hy\"), Load(\"state\"), GetField(\"dir\"), Push(Integer(2)), Eq, JmpIfFalse(51), Load(\"hx\"), Push(Integer(1)), Sub, Store(\"hx\"), Load(\"state\"), GetField(\"dir\"), Push(Integer(3)), Eq, JmpIfFalse(60), Load(\"hx\"), Push(Integer(1)), Add, Store(\"hx\"), Load(\"hx\"), Push(Integer(0)), Lt, Load(\"hx\"), Load(\"state\"), GetField(\"w\"), Ge, Or, Load(\"hy\"), Push(Integer(0)), Lt, Or, Load(\"hy\"), Load(\"state\"), GetField(\"h\"), Ge, Or, JmpIfFalse(88), Push(Integer(1)), Load(\"state\"), SetField(\"game_over\"), Store(\"state\"), Push(String(\"Game Over: Wall Collision\")), Print, Push(Unit), Pop, Push(Integer(0)), Ret, Load(\"state\"), GetField(\"snake\"), Load(\"sys.len\"), Call(1), Destructure, Store(\"l\"), Store(\"_\"), Push(Integer(0)), Store(\"i\"), Load(\"i\"), Load(\"l\"), Lt, JmpIfFalse(146), Load(\"state\"), GetField(\"snake\"), Load(\"i\"), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"part\"), Store(\"_\"), Load(\"part\"), Push(Integer(0)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"px\"), Store(\"_\"), Load(\"part\"), Push(Integer(1)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"py\"), Store(\"_\"), Load(\"px\"), Load(\"hx\"), Eq, Load(\"py\"), Load(\"hy\"), Eq, And, JmpIfFalse(141), Push(Integer(1)), Load(\"state\"), SetField(\"game_over\"), Store(\"state\"), Push(String(\"Game Over: Self Collision\")), Print, Push(Unit), Pop, Push(Integer(0)), Ret, Load(\"i\"), Push(Integer(1)), Add, Store(\"i\"), Jmp(97), Load(\"hx\"), Load(\"hy\"), MakeList(2), Store(\"new_head\"), Load(\"state\"), GetField(\"apple\"), Push(Integer(0)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"ax\"), Store(\"_\"), Load(\"state\"), GetField(\"apple\"), Push(Integer(1)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"ay\"), Store(\"_\"), Push(Integer(0)), Store(\"eaten\"), Load(\"hx\"), Load(\"ax\"), Eq, Load(\"hy\"), Load(\"ay\"), Eq, And, JmpIfFalse(217), Push(Integer(1)), Store(\"eaten\"), Load(\"state\"), GetField(\"score\"), Push(Integer(1)), Add, Load(\"state\"), SetField(\"score\"), Store(\"state\"), Push(String(\"Apple Eaten! Score: \")), Print, Load(\"state\"), GetField(\"score\"), Print, Push(Unit), Pop, Load(\"sys.time.now\"), Call(0), Store(\"t\"), Load(\"t\"), Push(Integer(10)), Div, Load(\"state\"), GetField(\"w\"), Load(\"mod\"), Call(2), Store(\"ax\"), Load(\"t\"), Push(Integer(100)), Div, Load(\"state\"), GetField(\"h\"), Load(\"mod\"), Call(2), Store(\"ay\"), Load(\"ax\"), Load(\"ay\"), MakeList(2), Load(\"state\"), SetField(\"apple\"), Store(\"state\"), MakeList(0), Store(\"new_snake\"), Push(Integer(0)), Store(\"start_idx\"), Load(\"eaten\"), Push(Integer(0)), Eq, JmpIfFalse(227), Push(Integer(1)), Store(\"start_idx\"), Load(\"start_idx\"), Store(\"i\"), Load(\"i\"), Load(\"l\"), Lt, JmpIfFalse(251), Load(\"state\"), GetField(\"snake\"), Load(\"i\"), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"val\"), Store(\"_\"), Load(\"new_snake\"), Load(\"val\"), Load(\"sys.list.append\"), Call(2), Pop, Load(\"i\"), Push(Integer(1)), Add, Store(\"i\"), Jmp(229), Load(\"new_snake\"), Load(\"new_head\"), Load(\"sys.list.append\"), Call(2), Pop, Load(\"new_snake\"), Load(\"state\"), SetField(\"snake\"), Store(\"state\"), Push(Integer(1)), Ret, Ret], constants: [], source_map: [SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 18, col: 0 }, SourceLocation { line: 18, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 20, col: 0 }, SourceLocation { line: 20, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 24, col: 0 }, SourceLocation { line: 24, col: 0 }, SourceLocation { line: 24, col: 0 }, SourceLocation { line: 24, col: 0 }, SourceLocation { line: 24, col: 0 }, SourceLocation { line: 24, col: 0 }, SourceLocation { line: 24, col: 0 }, SourceLocation { line: 25, col: 0 }, SourceLocation { line: 25, col: 0 }, SourceLocation { line: 25, col: 0 }, SourceLocation { line: 25, col: 0 }, SourceLocation { line: 25, col: 0 }, SourceLocation { line: 25, col: 0 }, SourceLocation { line: 25, col: 0 }, SourceLocation { line: 25, col: 0 }, SourceLocation { line: 26, col: 0 }, SourceLocation { line: 26, col: 0 }, SourceLocation { line: 26, col: 0 }, SourceLocation { line: 26, col: 0 }, SourceLocation { line: 27, col: 0 }, SourceLocation { line: 27, col: 0 }, SourceLocation { line: 27, col: 0 }, SourceLocation { line: 27, col: 0 }, SourceLocation { line: 28, col: 0 }, SourceLocation { line: 28, col: 0 }, SourceLocation { line: 29, col: 0 }, SourceLocation { line: 29, col: 0 }, SourceLocation { line: 29, col: 0 }, SourceLocation { line: 29, col: 0 }, SourceLocation { line: 29, col: 0 }, SourceLocation { line: 30, col: 0 }, SourceLocation { line: 30, col: 0 }, SourceLocation { line: 30, col: 0 }, SourceLocation { line: 30, col: 0 }, SourceLocation { line: 31, col: 0 }, SourceLocation { line: 31, col: 0 }, SourceLocation { line: 31, col: 0 }, SourceLocation { line: 31, col: 0 }, SourceLocation { line: 31, col: 0 }, SourceLocation { line: 31, col: 0 }, SourceLocation { line: 31, col: 0 }, SourceLocation { line: 31, col: 0 }, SourceLocation { line: 32, col: 0 }, SourceLocation { line: 32, col: 0 }, SourceLocation { line: 32, col: 0 }, SourceLocation { line: 32, col: 0 }, SourceLocation { line: 32, col: 0 }, SourceLocation { line: 32, col: 0 }, SourceLocation { line: 32, col: 0 }, SourceLocation { line: 32, col: 0 }, SourceLocation { line: 33, col: 0 }, SourceLocation { line: 33, col: 0 }, SourceLocation { line: 34, col: 0 }, SourceLocation { line: 34, col: 0 }, SourceLocation { line: 34, col: 0 }, SourceLocation { line: 34, col: 0 }, SourceLocation { line: 34, col: 0 }, SourceLocation { line: 34, col: 0 }, SourceLocation { line: 34, col: 0 }, SourceLocation { line: 34, col: 0 }, SourceLocation { line: 35, col: 0 }, SourceLocation { line: 35, col: 0 }, SourceLocation { line: 36, col: 0 }, SourceLocation { line: 36, col: 0 }, SourceLocation { line: 36, col: 0 }, SourceLocation { line: 36, col: 0 }, SourceLocation { line: 36, col: 0 }, SourceLocation { line: 36, col: 0 }, SourceLocation { line: 36, col: 0 }, SourceLocation { line: 37, col: 0 }, SourceLocation { line: 37, col: 0 }, SourceLocation { line: 37, col: 0 }, SourceLocation { line: 37, col: 0 }, SourceLocation { line: 37, col: 0 }, SourceLocation { line: 37, col: 0 }, SourceLocation { line: 37, col: 0 }, SourceLocation { line: 38, col: 0 }, SourceLocation { line: 38, col: 0 }, SourceLocation { line: 38, col: 0 }, SourceLocation { line: 39, col: 0 }, SourceLocation { line: 39, col: 0 }, SourceLocation { line: 39, col: 0 }, SourceLocation { line: 39, col: 0 }, SourceLocation { line: 39, col: 0 }, SourceLocation { line: 39, col: 0 }, SourceLocation { line: 39, col: 0 }, SourceLocation { line: 39, col: 0 }, SourceLocation { line: 40, col: 0 }, SourceLocation { line: 40, col: 0 }, SourceLocation { line: 40, col: 0 }, SourceLocation { line: 40, col: 0 }, SourceLocation { line: 40, col: 0 }, SourceLocation { line: 40, col: 0 }, SourceLocation { line: 40, col: 0 }, SourceLocation { line: 40, col: 0 }, SourceLocation { line: 41, col: 0 }, SourceLocation { line: 41, col: 0 }, SourceLocation { line: 41, col: 0 }, SourceLocation { line: 41, col: 0 }, SourceLocation { line: 41, col: 0 }, SourceLocation { line: 41, col: 0 }, SourceLocation { line: 42, col: 0 }, SourceLocation { line: 42, col: 0 }, SourceLocation { line: 43, col: 0 }, SourceLocation { line: 43, col: 0 }, SourceLocation { line: 44, col: 0 }, SourceLocation { line: 44, col: 0 }, SourceLocation { line: 44, col: 0 }, SourceLocation { line: 44, col: 0 }, SourceLocation { line: 45, col: 0 }, SourceLocation { line: 45, col: 0 }, SourceLocation { line: 46, col: 0 }, SourceLocation { line: 46, col: 0 }, SourceLocation { line: 47, col: 0 }, SourceLocation { line: 47, col: 0 }, SourceLocation { line: 47, col: 0 }, SourceLocation { line: 47, col: 0 }, SourceLocation { line: 48, col: 0 }, SourceLocation { line: 48, col: 0 }, SourceLocation { line: 48, col: 0 }, SourceLocation { line: 48, col: 0 }, SourceLocation { line: 48, col: 0 }, SourceLocation { line: 48, col: 0 }, SourceLocation { line: 48, col: 0 }, SourceLocation { line: 48, col: 0 }, SourceLocation { line: 49, col: 0 }, SourceLocation { line: 49, col: 0 }, SourceLocation { line: 49, col: 0 }, SourceLocation { line: 49, col: 0 }, SourceLocation { line: 49, col: 0 }, SourceLocation { line: 50, col: 0 }, SourceLocation { line: 50, col: 0 }, SourceLocation { line: 50, col: 0 }, SourceLocation { line: 50, col: 0 }, SourceLocation { line: 50, col: 0 }, SourceLocation { line: 51, col: 0 }, SourceLocation { line: 51, col: 0 }, SourceLocation { line: 51, col: 0 }, SourceLocation { line: 51, col: 0 }, SourceLocation { line: 51, col: 0 }, SourceLocation { line: 52, col: 0 }, SourceLocation { line: 52, col: 0 }, SourceLocation { line: 52, col: 0 }, SourceLocation { line: 52, col: 0 }, SourceLocation { line: 53, col: 0 }, SourceLocation { line: 53, col: 0 }, SourceLocation { line: 53, col: 0 }], current_loc: SourceLocation { line: 53, col: 0 } }))",
    "Store(\"update_game\")",
    "Push(Function(Chunk { code: [Push(String(\"{\")), Store(\"res\"), Load(\"res\"), Push(String(\"\\\"snake\\\": [\")), Add, Store(\"res\"), Load(\"state\"), GetField(\"snake\"), Load(\"sys.len\"), Call(1), Destructure, Store(\"l\"), Store(\"_\"), Push(Integer(0)), Store(\"i\"), Load(\"i\"), Load(\"l\"), Lt, JmpIfFalse(66), Load(\"i\"), Push(Integer(0)), Gt, JmpIfFalse(27), Load(\"res\"), Push(String(\",\")), Add, Store(\"res\"), Load(\"state\"), GetField(\"snake\"), Load(\"i\"), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"part\"), Store(\"_\"), Load(\"part\"), Push(Integer(0)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"x\"), Store(\"_\"), Load(\"part\"), Push(Integer(1)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"y\"), Store(\"_\"), Load(\"res\"), Push(String(\"[\")), Add, Load(\"x\"), Add, Push(String(\",\")), Add, Load(\"y\"), Add, Push(String(\"]\")), Add, Store(\"res\"), Load(\"i\"), Push(Integer(1)), Add, Store(\"i\"), Jmp(15), Load(\"res\"), Push(String(\"],\")), Add, Store(\"res\"), Load(\"state\"), GetField(\"apple\"), Push(Integer(0)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"ax\"), Store(\"_\"), Load(\"state\"), GetField(\"apple\"), Push(Integer(1)), Load(\"sys.list.get\"), Call(2), Destructure, Store(\"ay\"), Store(\"_\"), Load(\"res\"), Push(String(\"\\\"apple\\\": [\")), Add, Load(\"ax\"), Add, Push(String(\",\")), Add, Load(\"ay\"), Add, Push(String(\"],\")), Add, Store(\"res\"), Push(String(\"false\")), Store(\"go\"), Load(\"state\"), GetField(\"game_over\"), JmpIfFalse(105), Push(String(\"true\")), Store(\"go\"), Load(\"res\"), Push(String(\"\\\"game_over\\\": \")), Add, Load(\"go\"), Add, Store(\"res\"), Load(\"res\"), Push(String(\"}\")), Add, Store(\"res\"), Load(\"res\"), Ret, Ret], constants: [], source_map: [SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 15, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 16, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 17, col: 0 }, SourceLocation { line: 18, col: 0 }, SourceLocation { line: 18, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 19, col: 0 }, SourceLocation { line: 20, col: 0 }, SourceLocation { line: 20, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 21, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 22, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 23, col: 0 }, SourceLocation { line: 23, col: 0 }], current_loc: SourceLocation { line: 23, col: 0 } }))",
    "Store(\"json_state\")",
    "Push(Function(Chunk { code: [Store(\"path\"), Load(\"path\"), Push(String(\"/\")), Eq, JmpIfFalse(9), Push(String(\"examples/snake.html\")), Load(\"sys.fs.read\"), Call(1), Ret, Load(\"path\"), Push(String(\"/state\")), Eq, JmpIfFalse(16), Load(\"json_state\"), Call(0), Ret, Load(\"path\"), Push(String(\"/up\")), Eq, Load(\"state\"), GetField(\"dir\"), Push(Integer(1)), Eq, Push(Integer(0)), Eq, And, JmpIfFalse(31), Push(Integer(0)), Load(\"state\"), SetField(\"dir\"), Store(\"state\"), Load(\"path\"), Push(String(\"/down\")), Eq, Load(\"state\"), GetField(\"dir\"), Push(Integer(0)), Eq, Push(Integer(0)), Eq, And, JmpIfFalse(46), Push(Integer(1)), Load(\"state\"), SetField(\"dir\"), Store(\"state\"), Load(\"path\"), Push(String(\"/left\")), Eq, Load(\"state\"), GetField(\"dir\"), Push(Integer(3)), Eq, Push(Integer(0)), Eq, And, JmpIfFalse(61), Push(Integer(2)), Load(\"state\"), SetField(\"dir\"), Store(\"state\"), Load(\"path\"), Push(String(\"/right\")), Eq, Load(\"state\"), GetField(\"dir\"), Push(Integer(2)), Eq, Push(Integer(0)), Eq, And, JmpIfFalse(76), Push(Integer(3)), Load(\"state\"), SetField(\"dir\"), Store(\"state\"), Push(String(\"OK\")), Ret, Ret], constants: [], source_map: [SourceLocation { line: 0, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 2, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 3, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 4, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 5, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 6, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 7, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 8, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 9, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 10, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 11, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 12, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 13, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 14, col: 0 }, SourceLocation { line: 14, col: 0 }], current_loc: SourceLocation { line: 14, col: 0 } }))",
    "Store(\"handler\")",
    "Push(String(\"Starting Ark Snake Server...\"))",
    "Print",
    "Push(Unit)",
    "Pop",
    "Push(String(\"Port: 8000\"))",
    "Print",
    "Push(Unit)",
    "Pop",
    "Push(String(\"Access: http://localhost:8000\"))",
    "Print",
    "Push(Unit)",
    "Pop",
    "Load(\"sys\")",
    "GetField(\"net\")",
    "GetField(\"http\")",
    "Push(Integer(8000))",
    "Load(\"handler\")",
    "Load(\"serve\")",
    "Call(3)",
    "Pop",
    "Push(Integer(1))",
    "JmpIfFalse(69)",
    "Load(\"update_game\")",
    "Call(0)",
    "Pop",
    "Push(Integer(100))",
    "Load(\"sleep_ms\")",
    "Call(1)",
    "Pop",
    "Jmp(59)",
    "Push(Unit)",
]
